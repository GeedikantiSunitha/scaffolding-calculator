<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Calculator App</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #f5f5f5;
        height: 100vh;
        display: flex;
        overflow: hidden;
      }
      
      .sidebar {
        width: 280px;
        background: #2d2d30;
        color: white;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        position: fixed;
        height: 100vh;
        z-index: 1000;
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      /* Hamburger Menu Button */
      .hamburger-menu {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1001;
        background: #2d2d30;
        color: white;
        border: none;
        padding: 12px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .hamburger-menu:hover {
        background: #3e3e42;
        transform: scale(1.05);
      }
      
      /* Overlay for mobile */
      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }
      
      .sidebar-overlay.open {
        opacity: 1;
        visibility: visible;
      }
      
      .sidebar-header {
        padding: 20px;
        border-bottom: 1px solid #3e3e42;
        display: flex;
        align-items: center;
        gap: 15px;
      }
      
      .hamburger {
        width: 20px;
        height: 20px;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      
      .hamburger span {
        width: 100%;
        height: 2px;
        background: white;
      }
      
      .sidebar-title {
        font-size: 1.2rem;
        font-weight: 600;
      }
      
      .nav-section {
        padding: 20px 0;
      }
      
      .nav-title {
        padding: 0 20px 10px;
        font-size: 0.9rem;
        font-weight: 600;
        color: #cccccc;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      
      .nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 20px;
        cursor: pointer;
        transition: background-color 0.2s;
        border-left: 3px solid transparent;
      }
      
      .nav-item:hover {
        background: #3e3e42;
      }
      
      .nav-item.active {
        background: #0078d4;
        border-left-color: #0078d4;
      }
      
      .nav-icon {
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
      }
      
      .nav-text {
        font-size: 0.95rem;
      }
      
      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        background: white;
        overflow-y: auto;
        overflow-x: hidden;
        height: 100vh;
        margin-left: 0;
        transition: margin-left 0.3s ease;
      }
      
      .main-content.sidebar-open {
        margin-left: 280px;
      }
      
      .content-header {
        padding: 20px 30px 20px 80px;
        border-bottom: 1px solid #e1e1e1;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: white;
        margin-top: 0;
      }
      
      .mode-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #323130;
      }
      
      .content-body {
        flex: 1;
        padding: 30px;
        overflow-y: auto;
      }
      
      /* Standard Calculator Styles */
      .calculator-container {
        max-width: 400px;
        margin: 0 auto;
      }
      
      .display {
        background: #2c3e50;
        color: white;
        font-size: 2.5rem;
        font-weight: 300;
        text-align: right;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        min-height: 120px;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: center;
        word-wrap: break-word;
        overflow-wrap: break-word;
        white-space: pre-wrap;
        line-height: 1.2;
      }
      
      .memory-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }
      
      .memory-btn {
        background: #9b59b6;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        padding: 12px 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        color: white;
        min-width: 60px;
      }
      
      .memory-btn:hover {
        background: #8e44ad;
        transform: translateY(-2px);
      }
      
      .buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(6, 1fr);
        gap: 15px;
      }
      
      .btn {
        background: #ecf0f1;
        border: none;
        border-radius: 12px;
        font-size: 1.5rem;
        font-weight: 500;
        padding: 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        color: #2c3e50;
      }
      
      .btn:hover {
        background: #d5dbdb;
        transform: translateY(-2px);
      }
      
      .btn:active {
        transform: translateY(0);
      }
      
      .btn.operator {
        background: #3498db;
        color: white;
      }
      
      .btn.operator:hover {
        background: #2980b9;
      }
      
      .btn.equals {
        background: #e74c3c;
        color: white;
      }
      
      .btn.equals:hover {
        background: #c0392b;
      }
      
      .btn.clear {
        background: #95a5a6;
        color: white;
      }
      
      .btn.clear:hover {
        background: #7f8c8d;
      }
      
      .btn.advanced {
        background: #9b59b6;
        color: white;
      }
      
      .btn.advanced:hover {
        background: #8e44ad;
      }
      
      .btn.zero {
        grid-column: span 2;
      }
      
      .btn.equals {
        grid-row: span 2;
      }
      
      /* Scientific Calculator Styles */
      .scientific-calculator {
        max-width: 600px;
        margin: 0 auto;
      }
      
      .scientific-buttons {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 10px;
        margin-top: 20px;
      }
      
      .scientific-btn {
        background: #ecf0f1;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        padding: 15px 10px;
        cursor: pointer;
        transition: all 0.2s ease;
        color: #2c3e50;
      }
      
      .scientific-btn:hover {
        background: #d5dbdb;
      }
      
      .scientific-btn.function {
        background: #e67e22;
        color: white;
      }
      
      .scientific-btn.function:hover {
        background: #d35400;
      }
      
      /* Graphing Calculator Styles */
      .graphing-container {
        display: flex;
        gap: 20px;
        height: 100%;
      }
      
      .graph-area {
        flex: 1;
        background: white;
        border: 1px solid #e1e1e1;
        border-radius: 8px;
        position: relative;
        min-height: 400px;
      }
      
      .graph-controls {
        width: 300px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      
      .function-input {
        background: #f8f9fa;
        border: 1px solid #e1e1e1;
        border-radius: 8px;
          padding: 20px;
        }
        
      .function-field {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
      }
      
      .function-label {
        background: #0078d4;
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: 500;
        min-width: 40px;
        text-align: center;
      }
      
      .function-input-field {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid #d1d1d1;
        border-radius: 4px;
        font-size: 1rem;
      }
      
      .graph-keypad {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 8px;
      }
      
      .graph-btn {
        background: #f8f9fa;
        border: 1px solid #e1e1e1;
        border-radius: 4px;
        padding: 12px 8px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: background-color 0.2s;
      }
      
      .graph-btn:hover {
        background: #e9ecef;
      }
      
      /* Converter Styles */
      .converter-container {
        max-width: 800px;
        margin: 0 auto;
      }
      
      .converter-layout {
        display: flex;
        gap: 30px;
        align-items: flex-start;
      }
      
      .conversion-section {
        flex: 1;
      }
      
      .converter-header {
        text-align: center;
        margin-bottom: 30px;
      }
      
      .converter-title {
          font-size: 2rem;
        font-weight: 600;
        color: #323130;
        margin-bottom: 10px;
      }
      
      .conversion-grid {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 20px;
        align-items: center;
        margin-bottom: 30px;
      }
      
      .conversion-unit {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      
      .unit-input {
          padding: 15px;
        border: 2px solid #e1e1e1;
        border-radius: 8px;
        font-size: 1.2rem;
        text-align: right;
      }
      
      .unit-input:focus {
        outline: none;
        border-color: #0078d4;
      }
      
      .unit-select {
        padding: 12px;
        border: 2px solid #e1e1e1;
        border-radius: 8px;
        font-size: 1rem;
        background: white;
      }
      
      .unit-select:focus {
        outline: none;
        border-color: #0078d4;
      }
      
      .conversion-arrow {
        font-size: 2rem;
        color: #0078d4;
        text-align: center;
      }
      
      /* Additional Conversions Display */
      .additional-conversions {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
      }
      
      .conversion-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: #323130;
        margin-bottom: 15px;
      }
      
      .conversion-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
      }
      
      .conversion-item {
        background: white;
        padding: 10px 15px;
        border-radius: 6px;
        border-left: 4px solid #0078d4;
        font-size: 0.9rem;
        color: #323130;
      }
      
      .conversion-value {
        font-weight: 600;
        color: #0078d4;
      }
      
      .conversion-unit-label {
        color: #6c757d;
        font-size: 0.8rem;
      }
      
      /* Converter Keypad Styles */
      .converter-keypad {
        width: 200px;
        background: #f8f9fa;
        border-radius: 12px;
        padding: 15px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }
      
      .keypad-row {
        display: flex;
        gap: 8px;
        margin-bottom: 8px;
      }
      
      .keypad-row:last-child {
        margin-bottom: 0;
      }
      
      .keypad-btn {
        flex: 1;
        background: white;
        border: 1px solid #e1e1e1;
        border-radius: 6px;
        padding: 12px 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 500;
        transition: all 0.2s ease;
        color: #323130;
      }
      
      .keypad-btn:hover {
        background: #e9ecef;
        transform: translateY(-1px);
      }
      
      .keypad-btn:active {
        transform: translateY(0);
        background: #dee2e6;
      }
      
      .keypad-btn.clear {
        background: #dc3545;
        color: white;
        border-color: #dc3545;
      }
      
      .keypad-btn.clear:hover {
        background: #c82333;
        border-color: #c82333;
      }
      
      .keypad-btn.zero {
        flex: 2;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        .converter-layout {
          flex-direction: column;
          gap: 20px;
        }
        
        .converter-keypad {
          width: 100%;
          max-width: 300px;
          margin: 0 auto;
        }
        
        .conversion-grid {
          grid-template-columns: 1fr;
          gap: 15px;
        }
        
        .conversion-arrow {
          transform: rotate(90deg);
          font-size: 1.5rem;
        }
        
        .conversion-list {
          grid-template-columns: 1fr;
        }
        
        .keypad-btn {
          padding: 15px 8px;
          font-size: 1.1rem;
        }
      }
      
      /* Unified Calculator Styles */
      .unified-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        min-height: 100vh;
        overflow-y: auto;
        overflow-x: hidden;
      }
      
      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }
      
      /* Custom scrollbar */
      .unified-container::-webkit-scrollbar {
        width: 8px;
      }
      
      .unified-container::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }
      
      .unified-container::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
      }
      
      .unified-container::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }
      
      .unified-header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      }
      
      .unified-header h1 {
        font-size: 2.5rem;
        margin: 0 0 10px 0;
        font-weight: 700;
      }
      
      .unified-header p {
          font-size: 1.2rem;
        margin: 0;
        opacity: 0.9;
      }
      
      .unified-grid {
        display: grid;
        gap: 30px;
        padding-bottom: 50px;
      }
      
      .unified-section {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        border: 1px solid #e9ecef;
      }
      
      .unified-section h2 {
        font-size: 1.5rem;
        margin: 0 0 20px 0;
        color: #323130;
        font-weight: 600;
        border-bottom: 2px solid #0078d4;
        padding-bottom: 10px;
      }
      
      .mode-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        max-height: 400px;
        overflow-y: auto;
        padding-right: 10px;
      }
      
      .mode-grid::-webkit-scrollbar {
        width: 6px;
      }
      
      .mode-grid::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
      }
      
      .mode-grid::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 3px;
      }
      
      .mode-grid::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }
      
      .mode-card {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }
      
      .mode-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        border-color: #0078d4;
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      }
      
      .mode-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
      }
      
      .mode-title {
        font-size: 1.2rem;
        font-weight: 600;
        color: #323130;
        margin-bottom: 8px;
      }
      
      .mode-desc {
        font-size: 0.9rem;
        color: #6c757d;
        line-height: 1.4;
      }
      
      .converter-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
      }
      
      .converter-card {
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        border-radius: 10px;
          padding: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }
      
      .converter-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.12);
        border-color: #ff9800;
        background: linear-gradient(135deg, #ffe0b2 0%, #ffcc02 100%);
      }
      
      .converter-icon {
        font-size: 2rem;
        margin-bottom: 10px;
      }
      
      .converter-title {
        font-size: 1rem;
        font-weight: 600;
        color: #323130;
        margin-bottom: 5px;
      }
      
      .converter-desc {
        font-size: 0.8rem;
        color: #6c757d;
        line-height: 1.3;
      }
      
      .quick-access {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
      }
      
      .quick-item {
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        border-radius: 10px;
        padding: 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }
      
      .quick-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        border-color: #4caf50;
        background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
      }
      
      .quick-icon {
        font-size: 1.8rem;
      }
      
      .quick-text {
        font-size: 1rem;
        font-weight: 500;
        color: #323130;
      }
      
      /* Responsive Design for Unified Calculator */
      @media (max-width: 768px) {
        .unified-container {
          padding: 15px;
        }
        
        .unified-header h1 {
          font-size: 2rem;
        }
        
        .unified-header p {
          font-size: 1rem;
        }
        
        .mode-grid {
          grid-template-columns: 1fr;
          max-height: 300px;
        }
        
        .converter-grid {
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }
        
        .quick-access {
          grid-template-columns: 1fr;
        }
        
        .main-content.sidebar-open {
          margin-left: 0;
        }
        
        .sidebar {
          width: 100%;
        }
        
        .content-header {
          padding: 20px 30px 20px 70px;
        }
        
        .hamburger-menu {
          top: 15px;
          left: 15px;
          width: 44px;
          height: 44px;
          font-size: 16px;
        }
      }
      
      /* Programmer Calculator Styles */
      .programmer-container {
        max-width: 800px;
        margin: 0 auto;
      }
      
      .number-base-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }
      
      .base-btn {
        padding: 10px 20px;
        border: 2px solid #e1e1e1;
        background: white;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }
      
      .base-btn.active {
        background: #0078d4;
        color: white;
        border-color: #0078d4;
      }
      
      .programmer-display {
        background: #1e1e1e;
        color: #00ff00;
        font-family: 'Courier New', monospace;
        font-size: 1.5rem;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: right;
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: flex-end;
      }
      
      .programmer-buttons {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 10px;
      }
      
      .programmer-btn {
        background: #f8f9fa;
        border: 1px solid #e1e1e1;
        border-radius: 6px;
        padding: 15px 10px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 500;
        transition: background-color 0.2s;
      }
      
      .programmer-btn:hover {
        background: #e9ecef;
      }
      
      .programmer-btn.operation {
        background: #0078d4;
        color: white;
      }
      
      .programmer-btn.operation:hover {
        background: #106ebe;
      }
      
      /* Date Calculator Styles */
      .date-calculator {
        max-width: 600px;
        margin: 0 auto;
      }
      
      .date-input-group {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .date-input {
        flex: 1;
        padding: 15px;
        border: 2px solid #e1e1e1;
        border-radius: 8px;
        font-size: 1rem;
      }
      
      .date-input:focus {
        outline: none;
        border-color: #0078d4;
      }
      
      .date-operation {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }
      
      .operation-btn {
        padding: 12px 24px;
        border: 2px solid #0078d4;
        background: white;
        color: #0078d4;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }
      
      .operation-btn:hover {
        background: #0078d4;
        color: white;
      }
      
      .date-result {
        background: #f8f9fa;
        border: 1px solid #e1e1e1;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        font-size: 1.2rem;
        font-weight: 600;
        color: #323130;
      }
      
      /* History and Memory Panels */
      .history-memory-panel {
        width: 300px;
        background: #f8f9fa;
        border-left: 1px solid #e1e1e1;
        display: flex;
        flex-direction: column;
      }
      
      .panel-tabs {
        display: flex;
        border-bottom: 1px solid #e1e1e1;
      }
      
      .panel-tab {
        flex: 1;
        padding: 15px;
        background: transparent;
        border: none;
        cursor: pointer;
        font-weight: 500;
        border-bottom: 3px solid transparent;
        transition: all 0.2s;
      }
      
      .panel-tab.active {
        background: white;
        border-bottom-color: #0078d4;
        color: #0078d4;
      }
      
      .panel-content {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
      }
      
      .history-item, .memory-item {
        padding: 12px;
        margin-bottom: 8px;
        background: white;
        border-radius: 8px;
        border-left: 4px solid #0078d4;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      
      .history-expression {
        font-size: 1rem;
        color: #323130;
        margin-bottom: 4px;
      }
      
      .history-result {
        font-size: 1.2rem;
        font-weight: 600;
        color: #e74c3c;
      }
      
      .memory-value {
        font-size: 1.1rem;
        font-weight: 600;
        color: #323130;
        margin-bottom: 4px;
      }
      
      .memory-timestamp {
        font-size: 0.8rem;
        color: #6c757d;
      }
      
      .clear-btn {
        background: #dc3545;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        margin-top: 15px;
        width: 100%;
      }
      
      .clear-btn:hover {
        background: #c82333;
      }
      
      .empty-state {
        text-align: center;
        color: #6c757d;
        font-style: italic;
        padding: 40px 20px;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        body {
          flex-direction: column;
        }
        
        .sidebar {
          width: 100%;
          height: auto;
          max-height: 200px;
        }
        
        .main-content {
          height: calc(100vh - 200px);
        }
        
        .graphing-container {
          flex-direction: column;
        }
        
        .graph-controls {
          width: 100%;
        }
        
        .conversion-grid {
          grid-template-columns: 1fr;
          gap: 15px;
        }
        
        .conversion-arrow {
          transform: rotate(90deg);
        }
      }
    </style>
  </head>
  <body>
    <!-- Hamburger Menu Button -->
    <button class="hamburger-menu" onclick="toggleSidebar()">
      ☰
    </button>
    
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>
    
    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="sidebar-title">Calculator</div>
      </div>
      
      <div class="nav-section">
        <div class="nav-title">Calculator</div>
        <div class="nav-item" onclick="setMode('unified')">
          <div class="nav-icon">🧮</div>
          <div class="nav-text">Calculator</div>
        </div>
        <div class="nav-item active" onclick="setMode('standard')">
          <div class="nav-icon">📊</div>
          <div class="nav-text">Standard</div>
        </div>
        <div class="nav-item" onclick="setMode('scientific')">
          <div class="nav-icon">🔬</div>
          <div class="nav-text">Scientific</div>
        </div>
        <div class="nav-item" onclick="setMode('graphing')">
          <div class="nav-icon">📈</div>
          <div class="nav-text">Graphing</div>
        </div>
        <div class="nav-item" onclick="setMode('programmer')">
          <div class="nav-icon">&lt;/&gt;</div>
          <div class="nav-text">Programmer</div>
        </div>
        <div class="nav-item" onclick="setMode('date')">
          <div class="nav-icon">📅</div>
          <div class="nav-text">Date calculation</div>
        </div>
      </div>
      
      <div class="nav-section">
        <div class="nav-title">Converter</div>
        <div class="nav-item" onclick="setMode('currency')">
          <div class="nav-icon">∞</div>
          <div class="nav-text">Currency</div>
        </div>
        <div class="nav-item" onclick="setMode('volume')">
          <div class="nav-icon">📦</div>
          <div class="nav-text">Volume</div>
        </div>
        <div class="nav-item" onclick="setMode('length')">
          <div class="nav-icon">📏</div>
          <div class="nav-text">Length</div>
        </div>
        <div class="nav-item" onclick="setMode('weight')">
          <div class="nav-icon">⚖️</div>
          <div class="nav-text">Weight and mass</div>
        </div>
        <div class="nav-item" onclick="setMode('temperature')">
          <div class="nav-icon">🌡️</div>
          <div class="nav-text">Temperature</div>
        </div>
        <div class="nav-item" onclick="setMode('energy')">
          <div class="nav-icon">⚡</div>
          <div class="nav-text">Energy</div>
        </div>
        <div class="nav-item" onclick="setMode('area')">
          <div class="nav-icon">⊞</div>
          <div class="nav-text">Area</div>
        </div>
        <div class="nav-item" onclick="setMode('speed')">
          <div class="nav-icon">🏃</div>
          <div class="nav-text">Speed</div>
        </div>
        <div class="nav-item" onclick="setMode('time')">
          <div class="nav-icon">⏰</div>
          <div class="nav-text">Time</div>
        </div>
        <div class="nav-item" onclick="setMode('power')">
          <div class="nav-icon">⚡</div>
          <div class="nav-text">Power</div>
        </div>
        <div class="nav-item" onclick="setMode('data')">
          <div class="nav-icon">📄</div>
          <div class="nav-text">Data</div>
        </div>
        <div class="nav-item" onclick="setMode('pressure')">
          <div class="nav-icon">📊</div>
          <div class="nav-text">Pressure</div>
        </div>
        <div class="nav-item" onclick="setMode('angle')">
          <div class="nav-icon">∠</div>
          <div class="nav-text">Angle</div>
        </div>
      </div>
      
      <div class="nav-section">
        <div class="nav-item" onclick="setMode('settings')">
          <div class="nav-icon">⚙️</div>
          <div class="nav-text">Settings</div>
        </div>
      </div>
    </div>
    
    <!-- Main Content Area -->
    <div class="main-content" id="main-content">
      <div class="content-header">
        <div class="mode-title" id="mode-title">Standard</div>
      </div>
      
      <div class="content-body">
        <!-- Standard Calculator -->
        <div id="standard-calculator" class="calculator-container">
      <div class="display" id="display">0</div>
          
          <div class="memory-controls">
            <button class="memory-btn" onclick="memoryClear()">MC</button>
            <button class="memory-btn" onclick="memoryRecall()">MR</button>
            <button class="memory-btn" onclick="memoryAdd()">M+</button>
            <button class="memory-btn" onclick="memorySubtract()">M-</button>
            <button class="memory-btn" onclick="memoryStore()">MS</button>
          </div>
          
      <div class="buttons">
            <button class="btn clear" onclick="clearAll()">C</button>
            <button class="btn clear" onclick="clearEntry()">CE</button>
        <button class="btn clear" onclick="deleteLast()">⌫</button>
        <button class="btn operator" onclick="setOperator('/')">÷</button>
        
        <button class="btn" onclick="appendToDisplay('7')">7</button>
        <button class="btn" onclick="appendToDisplay('8')">8</button>
        <button class="btn" onclick="appendToDisplay('9')">9</button>
            <button class="btn operator" onclick="setOperator('*')">×</button>
        
        <button class="btn" onclick="appendToDisplay('4')">4</button>
        <button class="btn" onclick="appendToDisplay('5')">5</button>
        <button class="btn" onclick="appendToDisplay('6')">6</button>
            <button class="btn operator" onclick="setOperator('-')">-</button>
        
        <button class="btn" onclick="appendToDisplay('1')">1</button>
        <button class="btn" onclick="appendToDisplay('2')">2</button>
        <button class="btn" onclick="appendToDisplay('3')">3</button>
            <button class="btn operator" onclick="setOperator('+')">+</button>
        
        <button class="btn zero" onclick="appendToDisplay('0')">0</button>
        <button class="btn" onclick="appendToDisplay('.')">.</button>
            <button class="btn equals" onclick="calculate()">=</button>
        
        <!-- Advanced Operations Row -->
        <button class="btn advanced" onclick="percentage()">%</button>
        <button class="btn advanced" onclick="squareRoot()">√</button>
        <button class="btn advanced" onclick="square()">x²</button>
        <button class="btn advanced" onclick="toggleSign()">±</button>
          </div>
        </div>
        
        <!-- Scientific Calculator -->
        <div id="scientific-calculator" class="scientific-calculator" style="display: none;">
          <div class="display" id="scientific-display">0</div>
          
          <div class="scientific-buttons">
            <button class="scientific-btn function" onclick="scientificFunction('sin')">sin</button>
            <button class="scientific-btn function" onclick="scientificFunction('cos')">cos</button>
            <button class="scientific-btn function" onclick="scientificFunction('tan')">tan</button>
            <button class="scientific-btn function" onclick="scientificFunction('log')">log</button>
            <button class="scientific-btn function" onclick="scientificFunction('ln')">ln</button>
            
            <button class="scientific-btn" onclick="appendToDisplay('(')">(</button>
            <button class="scientific-btn" onclick="appendToDisplay(')')">)</button>
            <button class="scientific-btn" onclick="scientificFunction('pi')">π</button>
            <button class="scientific-btn" onclick="scientificFunction('euler')">e</button>
            <button class="scientific-btn" onclick="clearAll()">C</button>
            
            <button class="scientific-btn" onclick="appendToDisplay('7')">7</button>
            <button class="scientific-btn" onclick="appendToDisplay('8')">8</button>
            <button class="scientific-btn" onclick="appendToDisplay('9')">9</button>
            <button class="scientific-btn operator" onclick="setOperator('/')">÷</button>
            <button class="scientific-btn" onclick="scientificFunction('sqrt')">√</button>
            
            <button class="scientific-btn" onclick="appendToDisplay('4')">4</button>
            <button class="scientific-btn" onclick="appendToDisplay('5')">5</button>
            <button class="scientific-btn" onclick="appendToDisplay('6')">6</button>
            <button class="scientific-btn operator" onclick="setOperator('*')">×</button>
            <button class="scientific-btn" onclick="scientificFunction('pow')">x^y</button>
            
            <button class="scientific-btn" onclick="appendToDisplay('1')">1</button>
            <button class="scientific-btn" onclick="appendToDisplay('2')">2</button>
            <button class="scientific-btn" onclick="appendToDisplay('3')">3</button>
            <button class="scientific-btn operator" onclick="setOperator('-')">-</button>
            <button class="scientific-btn" onclick="scientificFunction('factorial')">n!</button>
            
            <button class="scientific-btn" onclick="appendToDisplay('0')">0</button>
            <button class="scientific-btn" onclick="appendToDisplay('.')">.</button>
            <button class="scientific-btn" onclick="toggleSign()">±</button>
            <button class="scientific-btn operator" onclick="setOperator('+')">+</button>
            <button class="scientific-btn equals" onclick="calculate()">=</button>
          </div>
        </div>
        
        <!-- Graphing Calculator -->
        <div id="graphing-calculator" class="graphing-container" style="display: none;">
          <div class="graph-area" id="graph-area">
            <canvas id="graph-canvas" width="600" height="400"></canvas>
          </div>
          <div class="graph-controls">
            <div class="function-input">
              <div class="function-field">
                <div class="function-label">f₁</div>
                <input type="text" class="function-input-field" id="function-input" placeholder="Enter an expression">
              </div>
              <div class="function-field">
                <div class="function-label">f</div>
                <input type="text" class="function-input-field" placeholder="Enter an expression">
              </div>
            </div>
            <div class="graph-keypad">
              <button class="graph-btn" onclick="appendToGraph('sin(')">sin</button>
              <button class="graph-btn" onclick="appendToGraph('cos(')">cos</button>
              <button class="graph-btn" onclick="appendToGraph('tan(')">tan</button>
              <button class="graph-btn" onclick="appendToGraph('log(')">log</button>
              <button class="graph-btn" onclick="appendToGraph('ln(')">ln</button>
              
              <button class="graph-btn" onclick="appendToGraph('(')">(</button>
              <button class="graph-btn" onclick="appendToGraph(')')">)</button>
              <button class="graph-btn" onclick="appendToGraph('π')">π</button>
              <button class="graph-btn" onclick="appendToGraph('e')">e</button>
              <button class="graph-btn" onclick="clearGraph()">C</button>
              
              <button class="graph-btn" onclick="appendToGraph('x^2')">x²</button>
              <button class="graph-btn" onclick="appendToGraph('1/x')">1/x</button>
              <button class="graph-btn" onclick="appendToGraph('|x|')">|x|</button>
              <button class="graph-btn" onclick="appendToGraph('x')">x</button>
              <button class="graph-btn" onclick="appendToGraph('y')">y</button>
              
              <button class="graph-btn" onclick="appendToGraph('x^(1/3)')">∛x</button>
              <button class="graph-btn" onclick="appendToGraph('(')">(</button>
              <button class="graph-btn" onclick="appendToGraph(')')">)</button>
              <button class="graph-btn" onclick="appendToGraph('=')">=</button>
              <button class="graph-btn" onclick="appendToGraph('/')">÷</button>
              
              <button class="graph-btn" onclick="appendToGraph('x^y')">x^y</button>
              <button class="graph-btn" onclick="appendToGraph('7')">7</button>
              <button class="graph-btn" onclick="appendToGraph('8')">8</button>
              <button class="graph-btn" onclick="appendToGraph('9')">9</button>
              <button class="graph-btn" onclick="appendToGraph('*')">×</button>
              
              <button class="graph-btn" onclick="appendToGraph('10^x')">10^x</button>
              <button class="graph-btn" onclick="appendToGraph('4')">4</button>
              <button class="graph-btn" onclick="appendToGraph('5')">5</button>
              <button class="graph-btn" onclick="appendToGraph('6')">6</button>
              <button class="graph-btn" onclick="appendToGraph('-')">-</button>
              
              <button class="graph-btn" onclick="appendToGraph('log(')">log</button>
              <button class="graph-btn" onclick="appendToGraph('1')">1</button>
              <button class="graph-btn" onclick="appendToGraph('2')">2</button>
              <button class="graph-btn" onclick="appendToGraph('3')">3</button>
              <button class="graph-btn" onclick="appendToGraph('+')">+</button>
              
              <button class="graph-btn" onclick="appendToGraph('ln(')">ln</button>
              <button class="graph-btn" onclick="appendToGraph('±')">±</button>
              <button class="graph-btn" onclick="appendToGraph('0')">0</button>
              <button class="graph-btn" onclick="appendToGraph('.')">.</button>
              <button class="graph-btn" onclick="plotFunction()">↵</button>
            </div>
          </div>
        </div>
        
        <!-- Programmer Calculator -->
        <div id="programmer-calculator" class="programmer-container" style="display: none;">
          <div class="number-base-selector">
            <button class="base-btn active" onclick="setBase('hex')">HEX</button>
            <button class="base-btn" onclick="setBase('dec')">DEC</button>
            <button class="base-btn" onclick="setBase('oct')">OCT</button>
            <button class="base-btn" onclick="setBase('bin')">BIN</button>
          </div>
          
          <div class="programmer-display" id="programmer-display">0</div>
          
          <div class="programmer-buttons">
            <button class="programmer-btn" onclick="programmerInput('A')">A</button>
            <button class="programmer-btn" onclick="programmerInput('B')">B</button>
            <button class="programmer-btn" onclick="programmerInput('C')">C</button>
            <button class="programmer-btn" onclick="programmerInput('D')">D</button>
            <button class="programmer-btn" onclick="programmerInput('E')">E</button>
            <button class="programmer-btn" onclick="programmerInput('F')">F</button>
            
            <button class="programmer-btn" onclick="programmerInput('7')">7</button>
            <button class="programmer-btn" onclick="programmerInput('8')">8</button>
            <button class="programmer-btn" onclick="programmerInput('9')">9</button>
            <button class="programmer-btn operation" onclick="setOperator('&')">AND</button>
            <button class="programmer-btn operation" onclick="setOperator('|')">OR</button>
            <button class="programmer-btn operation" onclick="setOperator('^')">XOR</button>
            
            <button class="programmer-btn" onclick="programmerInput('4')">4</button>
            <button class="programmer-btn" onclick="programmerInput('5')">5</button>
            <button class="programmer-btn" onclick="programmerInput('6')">6</button>
            <button class="programmer-btn operation" onclick="setOperator('<<')">Lsh</button>
            <button class="programmer-btn operation" onclick="setOperator('>>')">Rsh</button>
            <button class="programmer-btn operation" onclick="setOperator('~')">NOT</button>
            
            <button class="programmer-btn" onclick="programmerInput('1')">1</button>
            <button class="programmer-btn" onclick="programmerInput('2')">2</button>
            <button class="programmer-btn" onclick="programmerInput('3')">3</button>
            <button class="programmer-btn operation" onclick="setOperator('+')">+</button>
            <button class="programmer-btn operation" onclick="setOperator('-')">-</button>
            <button class="programmer-btn operation" onclick="setOperator('*')">×</button>
            
            <button class="programmer-btn" onclick="programmerInput('0')">0</button>
            <button class="programmer-btn" onclick="clearAll()">C</button>
            <button class="programmer-btn" onclick="deleteLast()">⌫</button>
            <button class="programmer-btn operation" onclick="setOperator('/')">÷</button>
            <button class="programmer-btn operation" onclick="setOperator('%')">Mod</button>
            <button class="programmer-btn equals" onclick="calculate()">=</button>
          </div>
        </div>
        
        <!-- Date Calculator -->
        <div id="date-calculator" class="date-calculator" style="display: none;">
          <div class="date-input-group">
            <input type="date" class="date-input" id="date1">
            <input type="date" class="date-input" id="date2">
          </div>
          
          <div class="date-operation">
            <button class="operation-btn" onclick="calculateDateDifference()">Calculate Difference</button>
            <button class="operation-btn" onclick="addDaysToDate()">Add Days</button>
            <button class="operation-btn" onclick="subtractDaysFromDate()">Subtract Days</button>
          </div>
          
          <div class="date-result" id="date-result">
            Select dates and operation to see result
          </div>
        </div>
        
        <!-- Converter Templates -->
        <div id="converter-template" style="display: none;">
          <div class="converter-container">
            <div class="converter-header">
              <div class="converter-title" id="converter-title">Converter</div>
            </div>
            
            <div class="converter-layout">
              <div class="conversion-section">
                <div class="conversion-grid">
                  <div class="conversion-unit">
                    <input type="number" class="unit-input" id="from-value" placeholder="0">
                    <select class="unit-select" id="from-unit"></select>
                  </div>
                  
                  <div class="conversion-arrow">⇄</div>
                  
                  <div class="conversion-unit">
                    <input type="number" class="unit-input" id="to-value" placeholder="0">
                    <select class="unit-select" id="to-unit"></select>
                  </div>
                </div>
                
                <!-- Additional conversions display -->
                <div class="additional-conversions" id="additional-conversions">
                  <div class="conversion-title">About equal to</div>
                  <div class="conversion-list" id="conversion-list"></div>
                </div>
              </div>
              
              <!-- Calculator Keypad for Converters -->
              <div class="converter-keypad">
                <div class="keypad-row">
                  <button class="keypad-btn clear" onclick="clearConverterEntry()">CE</button>
                  <button class="keypad-btn clear" onclick="deleteConverterLast()">⌫</button>
                </div>
                <div class="keypad-row">
                  <button class="keypad-btn" onclick="appendToConverter('7')">7</button>
                  <button class="keypad-btn" onclick="appendToConverter('8')">8</button>
                  <button class="keypad-btn" onclick="appendToConverter('9')">9</button>
                </div>
                <div class="keypad-row">
                  <button class="keypad-btn" onclick="appendToConverter('4')">4</button>
                  <button class="keypad-btn" onclick="appendToConverter('5')">5</button>
                  <button class="keypad-btn" onclick="appendToConverter('6')">6</button>
                </div>
                <div class="keypad-row">
                  <button class="keypad-btn" onclick="appendToConverter('1')">1</button>
                  <button class="keypad-btn" onclick="appendToConverter('2')">2</button>
                  <button class="keypad-btn" onclick="appendToConverter('3')">3</button>
                </div>
                <div class="keypad-row">
                  <button class="keypad-btn zero" onclick="appendToConverter('0')">0</button>
                  <button class="keypad-btn" onclick="appendToConverter('.')">.</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Unified Calculator Template -->
    <div id="unified-template" style="display: none;">
      <div class="unified-container">
        <div class="unified-header">
          <h1>Universal Calculator</h1>
          <p>All calculator modes and converters in one place</p>
        </div>
        
        <div class="unified-grid">
          <!-- Calculator Modes Section -->
          <div class="unified-section">
            <h2>Calculator Modes</h2>
            <div class="mode-grid">
              <div class="mode-card" onclick="setMode('standard')">
                <div class="mode-icon">📊</div>
                <div class="mode-title">Standard</div>
                <div class="mode-desc">Basic arithmetic operations</div>
              </div>
              <div class="mode-card" onclick="setMode('scientific')">
                <div class="mode-icon">🔬</div>
                <div class="mode-title">Scientific</div>
                <div class="mode-desc">Advanced math functions</div>
              </div>
              <div class="mode-card" onclick="setMode('graphing')">
                <div class="mode-icon">📈</div>
                <div class="mode-title">Graphing</div>
                <div class="mode-desc">Function plotting</div>
              </div>
              <div class="mode-card" onclick="setMode('programmer')">
                <div class="mode-icon">&lt;/&gt;</div>
                <div class="mode-title">Programmer</div>
                <div class="mode-desc">Number base conversions</div>
              </div>
              <div class="mode-card" onclick="setMode('date')">
                <div class="mode-icon">📅</div>
                <div class="mode-title">Date Calculator</div>
                <div class="mode-desc">Date arithmetic</div>
              </div>
            </div>
          </div>
          
          <!-- Converter Section -->
          <div class="unified-section">
            <h2>Unit Converters</h2>
            <div class="converter-grid">
              <div class="converter-card" onclick="setMode('currency')">
                <div class="converter-icon">∞</div>
                <div class="converter-title">Currency</div>
                <div class="converter-desc">Currency exchange rates</div>
              </div>
              <div class="converter-card" onclick="setMode('length')">
                <div class="converter-icon">📏</div>
                <div class="converter-title">Length</div>
                <div class="converter-desc">Distance measurements</div>
              </div>
              <div class="converter-card" onclick="setMode('weight')">
                <div class="converter-icon">⚖️</div>
                <div class="converter-title">Weight</div>
                <div class="converter-desc">Mass conversions</div>
              </div>
              <div class="converter-card" onclick="setMode('temperature')">
                <div class="converter-icon">🌡️</div>
                <div class="converter-title">Temperature</div>
                <div class="converter-desc">Heat measurements</div>
              </div>
              <div class="converter-card" onclick="setMode('volume')">
                <div class="converter-icon">📦</div>
                <div class="converter-title">Volume</div>
                <div class="converter-desc">Liquid measurements</div>
              </div>
              <div class="converter-card" onclick="setMode('energy')">
                <div class="converter-icon">⚡</div>
                <div class="converter-title">Energy</div>
                <div class="converter-desc">Power conversions</div>
              </div>
              <div class="converter-card" onclick="setMode('area')">
                <div class="converter-icon">🖼️</div>
                <div class="converter-title">Area</div>
                <div class="converter-desc">Surface measurements</div>
              </div>
              <div class="converter-card" onclick="setMode('speed')">
                <div class="converter-icon">🏃</div>
                <div class="converter-title">Speed</div>
                <div class="converter-desc">Velocity conversions</div>
              </div>
              <div class="converter-card" onclick="setMode('time')">
                <div class="converter-icon">⏰</div>
                <div class="converter-title">Time</div>
                <div class="converter-desc">Duration measurements</div>
              </div>
              <div class="converter-card" onclick="setMode('power')">
                <div class="converter-icon">⚡</div>
                <div class="converter-title">Power</div>
                <div class="converter-desc">Electrical power</div>
              </div>
              <div class="converter-card" onclick="setMode('data')">
                <div class="converter-icon">📄</div>
                <div class="converter-title">Data</div>
                <div class="converter-desc">Digital storage</div>
              </div>
              <div class="converter-card" onclick="setMode('pressure')">
                <div class="converter-icon">💨</div>
                <div class="converter-title">Pressure</div>
                <div class="converter-desc">Force per area</div>
              </div>
              <div class="converter-card" onclick="setMode('angle')">
                <div class="converter-icon">∠</div>
                <div class="converter-title">Angle</div>
                <div class="converter-desc">Angular measurements</div>
              </div>
            </div>
          </div>
          
          <!-- Quick Access Section -->
          <div class="unified-section">
            <h2>Quick Access</h2>
            <div class="quick-access">
              <div class="quick-item" onclick="setMode('standard')">
                <div class="quick-icon">🧮</div>
                <div class="quick-text">Basic Calculator</div>
              </div>
              <div class="quick-item" onclick="setMode('scientific')">
                <div class="quick-icon">🔬</div>
                <div class="quick-text">Scientific Calculator</div>
              </div>
              <div class="quick-item" onclick="setMode('currency')">
                <div class="quick-icon">∞</div>
                <div class="quick-text">Currency Converter</div>
              </div>
              <div class="quick-item" onclick="setMode('temperature')">
                <div class="quick-icon">🌡️</div>
                <div class="quick-text">Temperature Converter</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- History and Memory Panel -->
    <div class="history-memory-panel">
      <div class="panel-tabs">
        <button class="panel-tab active" onclick="showPanel('history')">History</button>
        <button class="panel-tab" onclick="showPanel('memory')">Memory</button>
      </div>
      
      <div class="panel-content">
        <div id="history-panel">
          <div id="history-list"></div>
          <button class="clear-btn" onclick="clearHistory()">Clear History</button>
        </div>
        
        <div id="memory-panel" style="display: none;">
          <div id="memory-list"></div>
          <button class="clear-btn" onclick="clearMemory()">Clear Memory</button>
        </div>
      </div>
    </div>

    <script>
      // Enhanced Calculator with All Modes and Converters
      class UniversalCalculator {
        constructor() {
          this.currentMode = 'standard';
          this.currentInput = '0';
          this.operator = null;
          this.previousInput = null;
          this.shouldResetDisplay = false;
          this.history = this.loadHistory();
          this.memory = this.loadMemory();
          this.currentBase = 'dec';
          this.conversionRates = this.loadConversionRates();
        }

        // Mode Management
        setMode(mode) {
          this.currentMode = mode;
          
          // Update navigation
          document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
          if (event && event.target) {
            event.target.classList.add('active');
          }
          
          // Update title
          const modeTitle = document.getElementById('mode-title');
          if (modeTitle) {
            modeTitle.textContent = this.getModeTitle(mode);
          }
          
          // Show/hide appropriate content
          this.showModeContent(mode);
          
          // Initialize mode-specific functionality
          this.initializeMode(mode);
        }

        getModeTitle(mode) {
          const titles = {
            'standard': 'Standard',
            'scientific': 'Scientific',
            'graphing': 'Graphing',
            'programmer': 'Programmer',
            'date': 'Date calculation',
            'currency': 'Currency',
            'volume': 'Volume',
            'length': 'Length',
            'weight': 'Weight and mass',
            'temperature': 'Temperature',
            'energy': 'Energy',
            'area': 'Area',
            'speed': 'Speed',
            'time': 'Time',
            'power': 'Power',
            'data': 'Data',
            'pressure': 'Pressure',
            'angle': 'Angle',
            'settings': 'Settings',
            'unified': 'Universal Calculator'
          };
          return titles[mode] || mode;
        }

        showModeContent(mode) {
          // Hide all templates first
          document.querySelectorAll('[id$="-template"]').forEach(template => {
            template.style.display = 'none';
          });
          
          // Hide all calculator modes
          const modes = ['standard', 'scientific', 'graphing', 'programmer', 'date'];
          modes.forEach(m => {
            const element = document.getElementById(m + '-calculator');
            if (element) element.style.display = 'none';
          });

          // Show the appropriate template
          if (mode === 'unified') {
            const unifiedTemplate = document.getElementById('unified-template');
            if (unifiedTemplate) unifiedTemplate.style.display = 'block';
          } else if (this.isConverterMode(mode)) {
            const converterTemplate = document.getElementById('converter-template');
            if (converterTemplate) {
              converterTemplate.style.display = 'block';
              this.setupConverter(mode);
            }
          } else if (modes.includes(mode)) {
            const element = document.getElementById(mode + '-calculator');
            if (element) element.style.display = 'block';
          }
        }

        isConverterMode(mode) {
          const converterModes = ['currency', 'volume', 'length', 'weight', 'temperature', 
                                'energy', 'area', 'speed', 'time', 'power', 'data', 'pressure', 'angle'];
          return converterModes.includes(mode);
        }

        initializeMode(mode) {
          switch(mode) {
            case 'graphing':
              this.initializeGraphing();
              break;
            case 'programmer':
              this.initializeProgrammer();
              break;
            case 'date':
              this.initializeDateCalculator();
              break;
          }
        }

        // Standard Calculator Functions
        updateDisplay() {
          const display = document.getElementById('display');
          if (this.operator && this.previousInput !== null) {
            const operatorSymbol = this.operator === '*' ? '×' : this.operator === '/' ? '÷' : this.operator;
            display.textContent = `${this.previousInput} ${operatorSymbol} ${this.currentInput}`;
        } else {
            display.textContent = this.currentInput;
          }
        }

        appendToDisplay(value) {
          if (this.shouldResetDisplay) {
            this.currentInput = '';
            this.shouldResetDisplay = false;
          }

          if (value === '.' && this.currentInput.includes('.')) {
            return;
          }

          if (this.currentInput === '0' && value !== '.') {
            this.currentInput = value;
          } else {
            this.currentInput += value;
          }

          this.updateDisplay();
        }

        clearAll() {
          this.currentInput = '0';
          this.operator = null;
          this.previousInput = null;
          this.shouldResetDisplay = false;
          this.updateDisplay();
        }

        clearEntry() {
          this.currentInput = '0';
          this.updateDisplay();
        }

        deleteLast() {
          if (this.currentInput.length > 1) {
            this.currentInput = this.currentInput.slice(0, -1);
          } else {
            this.currentInput = '0';
          }
          this.updateDisplay();
        }

        setOperator(op) {
          if (this.operator && this.previousInput !== null) {
            this.calculate();
          }
          
          this.operator = op;
          this.previousInput = this.currentInput;
          this.shouldResetDisplay = true;
          this.updateDisplay();
        }

        calculate() {
          if (this.operator && this.previousInput !== null) {
            const prev = parseFloat(this.previousInput);
            const current = parseFloat(this.currentInput);
          let result;

            switch (this.operator) {
            case '+':
              result = prev + current;
              break;
            case '-':
              result = prev - current;
              break;
            case '*':
              result = prev * current;
              break;
            case '/':
              if (current === 0) {
                alert('Cannot divide by zero!');
                return;
              }
              result = prev / current;
              break;
            default:
              return;
          }

            const operatorSymbol = this.operator === '*' ? '×' : this.operator === '/' ? '÷' : this.operator;
            const expression = `${this.previousInput} ${operatorSymbol} ${this.currentInput}`;
            
            this.addToHistory(expression, result);
            
            this.currentInput = this.formatResult(result);
            this.operator = null;
            this.previousInput = null;
            this.shouldResetDisplay = true;
            this.updateDisplay();
          }
        }

        formatResult(result) {
          if (Math.abs(result) > 1e10 || (Math.abs(result) < 1e-6 && result !== 0)) {
            return result.toExponential(6).replace(/\.?0+e/, 'e');
          }
          return parseFloat(result.toPrecision(12)).toString();
        }

        // Advanced Operations
        percentage() {
          const value = parseFloat(this.currentInput);
          const result = value / 100;
          this.addToHistory(`${this.currentInput}%`, result);
          this.currentInput = result.toString();
          this.shouldResetDisplay = true;
          this.updateDisplay();
        }

        squareRoot() {
          const value = parseFloat(this.currentInput);
          if (value < 0) {
            alert('Cannot calculate square root of negative number!');
            return;
          }
          const result = Math.sqrt(value);
          this.addToHistory(`√${this.currentInput}`, result);
          this.currentInput = this.formatResult(result);
          this.shouldResetDisplay = true;
          this.updateDisplay();
        }

        square() {
          const value = parseFloat(this.currentInput);
          const result = value * value;
          this.addToHistory(`${this.currentInput}²`, result);
          this.currentInput = result.toString();
          this.shouldResetDisplay = true;
          this.updateDisplay();
        }

        toggleSign() {
          if (this.currentInput !== '0') {
            this.currentInput = this.currentInput.startsWith('-') 
              ? this.currentInput.slice(1) 
              : '-' + this.currentInput;
            this.updateDisplay();
          }
        }

        // Scientific Calculator Functions
        scientificFunction(func) {
          const value = parseFloat(this.currentInput);
          let result;

          switch(func) {
            case 'sin':
              result = Math.sin(value * Math.PI / 180);
              break;
            case 'cos':
              result = Math.cos(value * Math.PI / 180);
              break;
            case 'tan':
              result = Math.tan(value * Math.PI / 180);
              break;
            case 'log':
              result = Math.log10(value);
              break;
            case 'ln':
              result = Math.log(value);
              break;
            case 'sqrt':
              result = Math.sqrt(value);
              break;
            case 'pow':
              // This would need a second input
              break;
            case 'factorial':
              result = this.factorial(Math.floor(value));
              break;
            case 'pi':
              this.appendToDisplay('3.14159');
              return;
            case 'euler':
              this.appendToDisplay('2.71828');
              return;
          }

          if (result !== undefined) {
            this.addToHistory(`${func}(${this.currentInput})`, result);
            this.currentInput = this.formatResult(result);
            this.shouldResetDisplay = true;
            this.updateDisplay();
          }
        }

        factorial(n) {
          if (n < 0) return NaN;
          if (n === 0 || n === 1) return 1;
          let result = 1;
          for (let i = 2; i <= n; i++) {
            result *= i;
          }
          return result;
        }

        // Programmer Calculator Functions
        setBase(base) {
          this.currentBase = base;
          document.querySelectorAll('.base-btn').forEach(btn => btn.classList.remove('active'));
          event.target.classList.add('active');
          this.updateProgrammerDisplay();
        }

        programmerInput(value) {
          // Validate input based on current base
          if (this.isValidInput(value)) {
            this.appendToDisplay(value);
            this.updateProgrammerDisplay();
          }
        }

        isValidInput(value) {
          const validChars = {
            'bin': ['0', '1'],
            'oct': ['0', '1', '2', '3', '4', '5', '6', '7'],
            'dec': ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],
            'hex': ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F']
          };
          return validChars[this.currentBase].includes(value.toUpperCase());
        }

        updateProgrammerDisplay() {
          const display = document.getElementById('programmer-display');
          display.textContent = this.currentInput;
        }

        // Graphing Calculator Functions
        initializeGraphing() {
          const canvas = document.getElementById('graph-canvas');
          if (canvas) {
            this.drawGraph();
          }
        }

        drawGraph() {
          const canvas = document.getElementById('graph-canvas');
          const ctx = canvas.getContext('2d');
          
          // Clear canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          
          // Draw axes
          ctx.strokeStyle = '#ccc';
          ctx.lineWidth = 1;
          
          // X-axis
          ctx.beginPath();
          ctx.moveTo(0, canvas.height / 2);
          ctx.lineTo(canvas.width, canvas.height / 2);
          ctx.stroke();
          
          // Y-axis
          ctx.beginPath();
          ctx.moveTo(canvas.width / 2, 0);
          ctx.lineTo(canvas.width / 2, canvas.height);
          ctx.stroke();
          
          // Draw grid
          ctx.strokeStyle = '#f0f0f0';
          for (let i = 0; i < canvas.width; i += 20) {
            ctx.beginPath();
            ctx.moveTo(i, 0);
            ctx.lineTo(i, canvas.height);
            ctx.stroke();
          }
          for (let i = 0; i < canvas.height; i += 20) {
            ctx.beginPath();
            ctx.moveTo(0, i);
            ctx.lineTo(canvas.width, i);
            ctx.stroke();
          }
        }

        appendToGraph(value) {
          const input = document.getElementById('function-input');
          input.value += value;
        }

        clearGraph() {
          const input = document.getElementById('function-input');
          input.value = '';
        }

        plotFunction() {
          const input = document.getElementById('function-input');
          const expression = input.value;
          
          if (expression) {
            this.drawFunction(expression);
          }
        }

        drawFunction(expression) {
          const canvas = document.getElementById('graph-canvas');
          const ctx = canvas.getContext('2d');
          
          ctx.strokeStyle = '#0078d4';
          ctx.lineWidth = 2;
          ctx.beginPath();
          
          let firstPoint = true;
          
          for (let x = -10; x <= 10; x += 0.1) {
            try {
              const y = this.evaluateExpression(expression.replace(/x/g, x));
              if (!isNaN(y) && isFinite(y)) {
                const pixelX = (x + 10) * (canvas.width / 20);
                const pixelY = canvas.height - (y + 10) * (canvas.height / 20);
                
                if (firstPoint) {
                  ctx.moveTo(pixelX, pixelY);
                  firstPoint = false;
                } else {
                  ctx.lineTo(pixelX, pixelY);
                }
              }
            } catch (e) {
              // Skip invalid points
            }
          }
          
          ctx.stroke();
        }

        evaluateExpression(expression) {
          // Simple expression evaluator
          // This is a basic implementation - in production, use a proper math parser
          return Function('"use strict"; return (' + expression + ')')();
        }

        // Date Calculator Functions
        initializeDateCalculator() {
          const today = new Date().toISOString().split('T')[0];
          document.getElementById('date1').value = today;
          document.getElementById('date2').value = today;
        }

        calculateDateDifference() {
          const date1 = new Date(document.getElementById('date1').value);
          const date2 = new Date(document.getElementById('date2').value);
          
          const diffTime = Math.abs(date2 - date1);
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
          
          document.getElementById('date-result').textContent = 
            `Difference: ${diffDays} days`;
        }

        addDaysToDate() {
          const date1 = new Date(document.getElementById('date1').value);
          const days = prompt('Enter number of days to add:');
          
          if (days && !isNaN(days)) {
            date1.setDate(date1.getDate() + parseInt(days));
            document.getElementById('date-result').textContent = 
              `Result: ${date1.toLocaleDateString()}`;
          }
        }

        subtractDaysFromDate() {
          const date1 = new Date(document.getElementById('date1').value);
          const days = prompt('Enter number of days to subtract:');
          
          if (days && !isNaN(days)) {
            date1.setDate(date1.getDate() - parseInt(days));
            document.getElementById('date-result').textContent = 
              `Result: ${date1.toLocaleDateString()}`;
          }
        }

        // Converter Functions
        setupConverter(mode) {
          const title = document.getElementById('converter-title');
          title.textContent = this.getModeTitle(mode);
          
          const fromUnit = document.getElementById('from-unit');
          const toUnit = document.getElementById('to-unit');
          
          // Clear existing options
          fromUnit.innerHTML = '';
          toUnit.innerHTML = '';
          
          // Get units for this converter
          const units = this.getConverterUnits(mode);
          
          // Populate unit selectors
          units.forEach(unit => {
            const option1 = document.createElement('option');
            option1.value = unit.value;
            option1.textContent = unit.label;
            fromUnit.appendChild(option1);
            
            const option2 = document.createElement('option');
            option2.value = unit.value;
            option2.textContent = unit.label;
            toUnit.appendChild(option2);
          });
          
          // Set up conversion listeners for bidirectional conversion
          document.getElementById('from-value').addEventListener('input', () => this.convertFromTo(mode));
          document.getElementById('to-value').addEventListener('input', () => this.convertToFrom(mode));
          fromUnit.addEventListener('change', () => this.convertFromTo(mode));
          toUnit.addEventListener('change', () => this.convertFromTo(mode));
          
          // Initialize additional conversions display
          this.updateAdditionalConversions(mode);
        }

        getConverterUnits(mode) {
          const units = {
            'currency': [
              { value: 'USD', label: 'US Dollar (USD)' },
              { value: 'EUR', label: 'Euro (EUR)' },
              { value: 'GBP', label: 'British Pound (GBP)' },
              { value: 'JPY', label: 'Japanese Yen (JPY)' },
              { value: 'CAD', label: 'Canadian Dollar (CAD)' },
              { value: 'AUD', label: 'Australian Dollar (AUD)' }
            ],
            'length': [
              { value: 'mm', label: 'Millimeter (mm)' },
              { value: 'cm', label: 'Centimeter (cm)' },
              { value: 'm', label: 'Meter (m)' },
              { value: 'km', label: 'Kilometer (km)' },
              { value: 'in', label: 'Inch (in)' },
              { value: 'ft', label: 'Foot (ft)' },
              { value: 'yd', label: 'Yard (yd)' },
              { value: 'mi', label: 'Mile (mi)' }
            ],
            'weight': [
              { value: 'mg', label: 'Milligram (mg)' },
              { value: 'g', label: 'Gram (g)' },
              { value: 'kg', label: 'Kilogram (kg)' },
              { value: 'oz', label: 'Ounce (oz)' },
              { value: 'lb', label: 'Pound (lb)' },
              { value: 'ton', label: 'Ton (ton)' }
            ],
            'temperature': [
              { value: 'c', label: 'Celsius (°C)' },
              { value: 'f', label: 'Fahrenheit (°F)' },
              { value: 'k', label: 'Kelvin (K)' }
            ],
            'volume': [
              { value: 'ml', label: 'Milliliter (ml)' },
              { value: 'l', label: 'Liter (l)' },
              { value: 'floz', label: 'Fluid Ounce (fl oz)' },
              { value: 'cup', label: 'Cup (cup)' },
              { value: 'pt', label: 'Pint (pt)' },
              { value: 'qt', label: 'Quart (qt)' },
              { value: 'gal', label: 'Gallon (gal)' }
            ],
            'energy': [
              { value: 'j', label: 'Joule (J)' },
              { value: 'kj', label: 'Kilojoule (kJ)' },
              { value: 'cal', label: 'Calorie (cal)' },
              { value: 'kcal', label: 'Kilocalorie (kcal)' },
              { value: 'wh', label: 'Watt-hour (Wh)' },
              { value: 'kwh', label: 'Kilowatt-hour (kWh)' },
              { value: 'btu', label: 'British Thermal Unit (BTU)' },
              { value: 'therm', label: 'Therm' }
            ],
            'area': [
              { value: 'mm2', label: 'Square Millimeter (mm²)' },
              { value: 'cm2', label: 'Square Centimeter (cm²)' },
              { value: 'm2', label: 'Square Meter (m²)' },
              { value: 'km2', label: 'Square Kilometer (km²)' },
              { value: 'in2', label: 'Square Inch (in²)' },
              { value: 'ft2', label: 'Square Foot (ft²)' },
              { value: 'yd2', label: 'Square Yard (yd²)' },
              { value: 'acre', label: 'Acre' }
            ],
            'speed': [
              { value: 'mps', label: 'Meter per Second (m/s)' },
              { value: 'kmh', label: 'Kilometer per Hour (km/h)' },
              { value: 'mph', label: 'Mile per Hour (mph)' },
              { value: 'fps', label: 'Foot per Second (ft/s)' },
              { value: 'knot', label: 'Knot' }
            ],
            'time': [
              { value: 'ms', label: 'Millisecond (ms)' },
              { value: 's', label: 'Second (s)' },
              { value: 'min', label: 'Minute (min)' },
              { value: 'h', label: 'Hour (h)' },
              { value: 'day', label: 'Day' },
              { value: 'week', label: 'Week' },
              { value: 'month', label: 'Month' },
              { value: 'year', label: 'Year' }
            ],
            'power': [
              { value: 'w', label: 'Watt (W)' },
              { value: 'kw', label: 'Kilowatt (kW)' },
              { value: 'mw', label: 'Megawatt (MW)' },
              { value: 'hp', label: 'Horsepower (hp)' },
              { value: 'btu_h', label: 'BTU per Hour' }
            ],
            'data': [
              { value: 'bit', label: 'Bit (bit)' },
              { value: 'byte', label: 'Byte (B)' },
              { value: 'kb', label: 'Kilobyte (KB)' },
              { value: 'mb', label: 'Megabyte (MB)' },
              { value: 'gb', label: 'Gigabyte (GB)' },
              { value: 'tb', label: 'Terabyte (TB)' },
              { value: 'pb', label: 'Petabyte (PB)' }
            ],
            'pressure': [
              { value: 'pa', label: 'Pascal (Pa)' },
              { value: 'kpa', label: 'Kilopascal (kPa)' },
              { value: 'mpa', label: 'Megapascal (MPa)' },
              { value: 'bar', label: 'Bar' },
              { value: 'atm', label: 'Atmosphere (atm)' },
              { value: 'psi', label: 'Pound per Square Inch (psi)' },
              { value: 'torr', label: 'Torr' }
            ],
            'angle': [
              { value: 'deg', label: 'Degree (°)' },
              { value: 'rad', label: 'Radian (rad)' },
              { value: 'grad', label: 'Gradian (grad)' },
              { value: 'turn', label: 'Turn' }
            ]
          };
          
          return units[mode] || [];
        }

        convertFromTo(mode) {
          const fromValue = parseFloat(document.getElementById('from-value').value) || 0;
          const fromUnit = document.getElementById('from-unit').value;
          const toUnit = document.getElementById('to-unit').value;
          
          if (fromUnit && toUnit) {
            const result = this.performConversion(fromValue, fromUnit, toUnit, mode);
            document.getElementById('to-value').value = this.formatResult(result);
            this.updateAdditionalConversions(mode, fromValue, fromUnit);
          }
        }

        convertToFrom(mode) {
          const toValue = parseFloat(document.getElementById('to-value').value) || 0;
          const fromUnit = document.getElementById('from-unit').value;
          const toUnit = document.getElementById('to-unit').value;
          
          if (fromUnit && toUnit) {
            const result = this.performConversion(toValue, toUnit, fromUnit, mode);
            document.getElementById('from-value').value = this.formatResult(result);
            this.updateAdditionalConversions(mode, result, fromUnit);
          }
        }

        // Converter Keypad Functions
        appendToConverter(value) {
          const activeInput = document.activeElement;
          if (activeInput && (activeInput.id === 'from-value' || activeInput.id === 'to-value')) {
            const currentValue = activeInput.value || '0';
            
            if (value === '.' && currentValue.includes('.')) {
              return;
            }
            
            if (currentValue === '0' && value !== '.') {
              activeInput.value = value;
            } else {
              activeInput.value = currentValue + value;
            }
            
            // Trigger conversion
            const mode = this.currentMode;
            if (activeInput.id === 'from-value') {
              this.convertFromTo(mode);
            } else {
              this.convertToFrom(mode);
            }
          } else {
            // Default to from-value if no input is focused
            const fromInput = document.getElementById('from-value');
            const currentValue = fromInput.value || '0';
            
            if (value === '.' && currentValue.includes('.')) {
              return;
            }
            
            if (currentValue === '0' && value !== '.') {
              fromInput.value = value;
            } else {
              fromInput.value = currentValue + value;
            }
            
            this.convertFromTo(this.currentMode);
          }
        }

        clearConverterEntry() {
          const activeInput = document.activeElement;
          if (activeInput && (activeInput.id === 'from-value' || activeInput.id === 'to-value')) {
            activeInput.value = '0';
            const mode = this.currentMode;
            if (activeInput.id === 'from-value') {
              this.convertFromTo(mode);
            } else {
              this.convertToFrom(mode);
            }
          } else {
            document.getElementById('from-value').value = '0';
            this.convertFromTo(this.currentMode);
          }
        }

        deleteConverterLast() {
          const activeInput = document.activeElement;
          if (activeInput && (activeInput.id === 'from-value' || activeInput.id === 'to-value')) {
            const currentValue = activeInput.value;
            if (currentValue.length > 1) {
              activeInput.value = currentValue.slice(0, -1);
            } else {
              activeInput.value = '0';
            }
            
            const mode = this.currentMode;
            if (activeInput.id === 'from-value') {
              this.convertFromTo(mode);
            } else {
              this.convertToFrom(mode);
            }
          } else {
            const fromInput = document.getElementById('from-value');
            const currentValue = fromInput.value;
            if (currentValue.length > 1) {
              fromInput.value = currentValue.slice(0, -1);
            } else {
              fromInput.value = '0';
            }
            this.convertFromTo(this.currentMode);
          }
        }

        // Additional Conversions Display
        updateAdditionalConversions(mode, value = 0, baseUnit = null) {
          const conversionList = document.getElementById('conversion-list');
          if (!conversionList) return;
          
          if (value === 0 || !baseUnit) {
            conversionList.innerHTML = '<div class="conversion-item">Enter a value to see additional conversions</div>';
            return;
          }
          
          const units = this.getConverterUnits(mode);
          const conversions = [];
          
          // Show conversions to other units
          units.forEach(unit => {
            if (unit.value !== baseUnit) {
              const convertedValue = this.performConversion(value, baseUnit, unit.value, mode);
              conversions.push({
                value: this.formatResult(convertedValue),
                unit: unit.label.split(' (')[0], // Remove unit abbreviation
                abbreviation: unit.value
              });
            }
          });
          
          // Sort by converted value (ascending)
          conversions.sort((a, b) => parseFloat(a.value) - parseFloat(b.value));
          
          // Display conversions
          conversionList.innerHTML = conversions.map(conv => `
            <div class="conversion-item">
              <div class="conversion-value">${conv.value}</div>
              <div class="conversion-unit-label">${conv.unit}</div>
            </div>
          `).join('');
        }

        performConversion(value, fromUnit, toUnit, mode) {
          if (fromUnit === toUnit) return value;
          
          // Temperature conversions (special case)
          if (mode === 'temperature') {
            const tempConversions = {
              'c': { 'f': (c) => c * 9/5 + 32, 'k': (c) => c + 273.15 },
              'f': { 'c': (f) => (f - 32) * 5/9, 'k': (f) => (f - 32) * 5/9 + 273.15 },
              'k': { 'c': (k) => k - 273.15, 'f': (k) => (k - 273.15) * 9/5 + 32 }
            };
            return tempConversions[fromUnit][toUnit](value);
          }
          
          // Comprehensive conversion tables
          const conversions = {
            'length': {
              'mm': 1,
              'cm': 10,
              'm': 1000,
              'km': 1000000,
              'in': 25.4,
              'ft': 304.8,
              'yd': 914.4,
              'mi': 1609344
            },
            'weight': {
              'mg': 1,
              'g': 1000,
              'kg': 1000000,
              'oz': 28349.5,
              'lb': 453592,
              'ton': 1000000000
            },
            'volume': {
              'ml': 1,
              'l': 1000,
              'floz': 29.5735,
              'cup': 236.588,
              'pt': 473.176,
              'qt': 946.353,
              'gal': 3785.41
            },
            'energy': {
              'j': 1,
              'kj': 1000,
              'cal': 4.184,
              'kcal': 4184,
              'wh': 3600,
              'kwh': 3600000,
              'btu': 1055.06,
              'therm': 105506000
            },
            'area': {
              'mm2': 1,
              'cm2': 100,
              'm2': 1000000,
              'km2': 1000000000000,
              'in2': 645.16,
              'ft2': 92903,
              'yd2': 836127,
              'acre': 4046856422.4
            },
            'speed': {
              'mps': 1,
              'kmh': 0.277778,
              'mph': 0.44704,
              'fps': 0.3048,
              'knot': 0.514444
            },
            'time': {
              'ms': 1,
              's': 1000,
              'min': 60000,
              'h': 3600000,
              'day': 86400000,
              'week': 604800000,
              'month': 2629746000,
              'year': 31556952000
            },
            'power': {
              'w': 1,
              'kw': 1000,
              'mw': 1000000,
              'hp': 745.7,
              'btu_h': 0.293071
            },
            'data': {
              'bit': 1,
              'byte': 8,
              'kb': 8000,
              'mb': 8000000,
              'gb': 8000000000,
              'tb': 8000000000000,
              'pb': 8000000000000000
            },
            'pressure': {
              'pa': 1,
              'kpa': 1000,
              'mpa': 1000000,
              'bar': 100000,
              'atm': 101325,
              'psi': 6894.76,
              'torr': 133.322
            },
            'angle': {
              'deg': 1,
              'rad': 57.2958,
              'grad': 0.9,
              'turn': 360
            }
          };
          
          const conversionTable = conversions[mode];
          if (conversionTable && conversionTable[fromUnit] && conversionTable[toUnit]) {
            const baseValue = value * conversionTable[fromUnit];
            return baseValue / conversionTable[toUnit];
          }
          
          return value;
        }

        // Memory Functions
        memoryStore() {
          const value = parseFloat(this.currentInput);
          if (!isNaN(value)) {
            const timestamp = new Date();
            this.memory.push({
              value: value,
              timestamp: timestamp.toISOString(),
              timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
            });
            this.saveMemory();
            this.updateMemoryDisplay();
          }
        }

        memoryRecall() {
          if (this.memory.length > 0) {
            const lastMemory = this.memory[this.memory.length - 1];
            this.currentInput = lastMemory.value.toString();
            this.shouldResetDisplay = true;
            this.updateDisplay();
          }
        }

        memoryAdd() {
          if (this.memory.length > 0) {
            const value = parseFloat(this.currentInput);
            const lastMemory = this.memory[this.memory.length - 1];
            lastMemory.value += value;
            lastMemory.timestamp = new Date().toISOString();
            this.saveMemory();
            this.updateMemoryDisplay();
          }
        }

        memorySubtract() {
          if (this.memory.length > 0) {
            const value = parseFloat(this.currentInput);
            const lastMemory = this.memory[this.memory.length - 1];
            lastMemory.value -= value;
            lastMemory.timestamp = new Date().toISOString();
            this.saveMemory();
            this.updateMemoryDisplay();
          }
        }

        memoryClear() {
          this.memory = [];
          this.saveMemory();
          this.updateMemoryDisplay();
        }

        // History Management
        addToHistory(expression, result) {
          const timestamp = new Date();
          this.history.push({
            expression: expression,
            result: result,
            timestamp: timestamp.toISOString(),
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
          });
          this.saveHistory();
          this.updateHistoryDisplay();
        }

        clearHistory() {
          this.history = [];
          this.saveHistory();
          this.updateHistoryDisplay();
        }

        clearMemory() {
          this.memory = [];
          this.saveMemory();
          this.updateMemoryDisplay();
        }

        // Local Storage
        saveHistory() {
          localStorage.setItem('calculatorHistory', JSON.stringify(this.history));
        }

        loadHistory() {
          const saved = localStorage.getItem('calculatorHistory');
          return saved ? JSON.parse(saved) : [];
        }

        saveMemory() {
          localStorage.setItem('calculatorMemory', JSON.stringify(this.memory));
        }

        loadMemory() {
          const saved = localStorage.getItem('calculatorMemory');
          return saved ? JSON.parse(saved) : [];
        }

        loadConversionRates() {
          // In production, load from an API
          return {};
        }

        // Display Updates
        updateHistoryDisplay() {
          const historyList = document.getElementById('history-list');
          if (this.history.length === 0) {
            historyList.innerHTML = '<div class="empty-state">No calculations yet</div>';
            return;
          }

          historyList.innerHTML = this.history.slice(-10).reverse().map(item => `
            <div class="history-item">
              <div class="history-expression">${item.expression}</div>
              <div class="history-result">${this.formatResult(item.result)}</div>
              <div class="memory-timestamp">${this.formatTimestamp(item.timestamp, item.timezone)}</div>
            </div>
          `).join('');
        }

        updateMemoryDisplay() {
          const memoryList = document.getElementById('memory-list');
          if (this.memory.length === 0) {
            memoryList.innerHTML = '<div class="empty-state">No values stored in memory</div>';
            return;
          }

          memoryList.innerHTML = this.memory.slice(-10).reverse().map(item => `
            <div class="memory-item">
              <div class="memory-value">${this.formatResult(item.value)}</div>
              <div class="memory-timestamp">${this.formatTimestamp(item.timestamp, item.timezone)}</div>
            </div>
          `).join('');
        }

        formatTimestamp(timestamp, timezone) {
          const date = new Date(timestamp);
          return date.toLocaleString('en-US', {
            timeZone: timezone,
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            timeZoneName: 'short'
          });
        }
      }

      // Global calculator instance
      const calculator = new UniversalCalculator();

      // Global functions for HTML onclick handlers
      function setMode(mode) { calculator.setMode(mode); }
      function appendToDisplay(value) { calculator.appendToDisplay(value); }
      function clearAll() { calculator.clearAll(); }
      function clearEntry() { calculator.clearEntry(); }
      function deleteLast() { calculator.deleteLast(); }
      function setOperator(op) { calculator.setOperator(op); }
      function calculate() { calculator.calculate(); }
      function percentage() { calculator.percentage(); }
      function squareRoot() { calculator.squareRoot(); }
      function square() { calculator.square(); }
      function toggleSign() { calculator.toggleSign(); }
      function scientificFunction(func) { calculator.scientificFunction(func); }
      function setBase(base) { calculator.setBase(base); }
      function programmerInput(value) { calculator.programmerInput(value); }
      function appendToGraph(value) { calculator.appendToGraph(value); }
      function clearGraph() { calculator.clearGraph(); }
      function plotFunction() { calculator.plotFunction(); }
      function calculateDateDifference() { calculator.calculateDateDifference(); }
      function addDaysToDate() { calculator.addDaysToDate(); }
      function subtractDaysFromDate() { calculator.subtractDaysFromDate(); }
      function memoryStore() { calculator.memoryStore(); }
      function memoryRecall() { calculator.memoryRecall(); }
      function memoryAdd() { calculator.memoryAdd(); }
      function memorySubtract() { calculator.memorySubtract(); }
      function memoryClear() { calculator.memoryClear(); }
      function clearHistory() { calculator.clearHistory(); }
      function clearMemory() { calculator.clearMemory(); }
      
      // Converter Keypad Functions
      function appendToConverter(value) { calculator.appendToConverter(value); }
      function clearConverterEntry() { calculator.clearConverterEntry(); }
      function deleteConverterLast() { calculator.deleteConverterLast(); }
      
      // Sidebar Toggle Functions
      function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const mainContent = document.getElementById('main-content');
        
        sidebar.classList.toggle('open');
        overlay.classList.toggle('open');
        mainContent.classList.toggle('sidebar-open');
      }
      
      function closeSidebar() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const mainContent = document.getElementById('main-content');
        
        sidebar.classList.remove('open');
        overlay.classList.remove('open');
        mainContent.classList.remove('sidebar-open');
      }

      // Panel Management
      function showPanel(panelName) {
        document.querySelectorAll('.panel-tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.panel-tab').forEach(tab => {
          if (tab.textContent.toLowerCase().includes(panelName)) {
            tab.classList.add('active');
          }
        });
        
        document.getElementById('history-panel').style.display = panelName === 'history' ? 'block' : 'none';
        document.getElementById('memory-panel').style.display = panelName === 'memory' ? 'block' : 'none';
        
        if (panelName === 'history') {
          calculator.updateHistoryDisplay();
        } else if (panelName === 'memory') {
          calculator.updateMemoryDisplay();
        }
      }

      // Keyboard Support
      document.addEventListener('keydown', function(event) {
        const key = event.key;
        
        if (key >= '0' && key <= '9' || key === '.') {
          appendToDisplay(key);
        } else if (['+', '-', '*', '/'].includes(key)) {
          setOperator(key);
        } else if (key === 'Enter' || key === '=') {
          event.preventDefault();
          calculate();
        } else if (key === 'Escape' || key === 'c' || key === 'C') {
          clearAll();
        } else if (key === 'Backspace') {
          deleteLast();
        }
      });

      // Initialize
      calculator.updateDisplay();
      calculator.updateHistoryDisplay();
      calculator.updateMemoryDisplay();
    </script>
  </body>
</html>